
  for i in 2:(size(m, 1) - 1)
    for j in 2:(size(m, 1) - 1)
      for k in 2:(size(m, 1) - 1)
        ret[i, j, k] = rule_check(m, w, CartesianIndex(i, j, k))
      end
    end
  end
